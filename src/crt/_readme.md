translated from: https://github.com/llvm-mos/llvm-mos-sdk/tree/main/mos-platform/common